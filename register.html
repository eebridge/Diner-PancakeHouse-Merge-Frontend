<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="navbar.css">
    <link rel="stylesheet" href="login.css">
    <link rel="stylesheet" href="register.css">
    <title>Register</title>
  </head>
  <body>
    <ul class="topnav">
        <li><a href="index.html">All Menus</a></li>
        <li><a href="pancakehouse.html">Breakfast</a></li>        
        <li><a href="diner.html">Lunch</a></li>
        <li><a href="cafe.html">Dinner</a></li>
        <li><a href="vegetarian.html">Vegetarian</a></li>
        <li class="right"><a class="active" href="login.html">Login</a></li>
      </ul>
<body>

<form style="border:1px solid #ccc">
  <div class="container">
    <h1>Sign Up</h1>
    <p>Please fill in this form to create an account.</p>
    <hr>
    <label for="email"><b>Email</b></label>
    <input type="text" placeholder="Enter Email" name="email" required>

    <label for="usn"><b>Username</b></label>
    <input type="password" placeholder="Enter Username" name="usn" required>

    <label for="psw"><b>Password</b></label>
    <input type="password" placeholder="Enter Password" name="psw" required>
    
    <label>
      <input type="checkbox" checked="checked" name="remember" style="margin-bottom:15px"> Remember me
    </label>
    
    <p>By creating an account you agree to our <a href="#" style="color:dodgerblue">Terms & Privacy</a>.</p>
    <div>
      <button type="button" class="cancelbtn">Cancel</button>
      <button class="signupbtn" onclick="signup()">Sign Up</button>
    </div>
  </div>
</form>

<script>
    let host = "https://diner-pancakehouse-merge-latest-2hxz.onrender.com";

    async function signup() {
        let custusername =  document.getElementsByName("usn").value;
        let custemail =  document.getElementByName("email").value;
        let custpassword =  document.getElementByName("psw").value;
        let customer = {username: custusername, password: custpassword, email: custemail};
        alert("you entered: " + JSON.stringify(customer));
        let request = {
            method : "POST",
            headers : {
                "Content-Type" : "application/json"
            },
            body : JSON.stringify(customer)
        };

        let response = await fetch(host + "/merger/signup", request);

        if(response.status == 200) {
            let hello = true;
        } else {
            console.log(response);
            message = "Something went wrong! Customer data could not be saved.";
            alert(message);
        }
    }
</script>
</body>
</html>